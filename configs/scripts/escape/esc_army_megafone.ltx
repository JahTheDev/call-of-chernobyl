[logic]
active = ph_idle@wait

[ph_idle@wait]
on_info = {=dist_to_actor_le(350)} ph_idle@start_humor
on_info2 = {=check_smart_alarm_status(esc_smart_terrain_3_16)} ph_idle@alarm
 
[ph_idle@start_humor]
on_info = %=play_sound(megafon_esc)%
on_info2 = {=check_smart_alarm_status(esc_smart_terrain_3_16)} ph_idle@alarm

[ph_idle@alarm]
on_info = %=play_sound(megafon_alarm_esc)%
on_timer = 33000 | ph_idle@wait
on_info2 = {!check_smart_alarm_status(esc_smart_terrain_3_16)} ph_idle@wait