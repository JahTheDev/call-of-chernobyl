[simulation_task_1]
icon = ui_inGame2_PD_Opitniy_stalker
prior = 50
repeat_timeout = 86400
storyline = false
sim_communities = stalker, csky, dolg, ecolog
title = simulation_task_1_name
title_functor = general_fetch_task
descr = simulation_task_1_text
descr_functor = general_fetch_task
job_descr = simulation_task_1_about
fetch_descr = simulation_task_1_fetch_about
fetch_func = %=setup_supplies_fetch_task(simulation_task_1_fetch:1:4)%
stage_complete = 1
status_functor = actor_has_fetch_item
target_functor = general_fetch_task
task_complete_descr = simulation_task_1_fetch_finish
precondition = {=random_chance(60)}
on_complete = %=reward_item_cost_mult_and_remove(simulation_task_1_fetch:1) =reward_stash(true) =remove_fetch_item(simulation_task_1_fetch) =inc_task_stage(simulation_task_1) =pstor_reset(simulation_task_1_fetch)%
on_fail = %=pstor_reset(simulation_task_1_fetch)%
condlist_0 = {!task_giver_alive(simulation_task_1)} fail

[simulation_task_2]
icon = ui_inGame2_PD_Opitniy_stalker
prior = 50
repeat_timeout = 86400
storyline = false
sim_communities = freedom, killer, bandit
title = simulation_task_2_name
title_functor = general_fetch_task
descr = simulation_task_2_text
descr_functor = general_fetch_task
job_descr = simulation_task_2_about
fetch_descr = simulation_task_2_fetch_about
fetch_func = %=setup_supplies_fetch_task(simulation_task_2_fetch:1:4)%
stage_complete = 1
status_functor = actor_has_fetch_item
target_functor = general_fetch_task
task_complete_descr = simulation_task_2_fetch_finish
precondition = {=random_chance(60)}
on_complete = %=reward_item_cost_mult_and_remove(simulation_task_2_fetch:1) =reward_stash(true) =remove_fetch_item(simulation_task_2_fetch) =inc_task_stage(simulation_task_2) =pstor_reset(simulation_task_2_fetch)%
on_fail = %=pstor_reset(simulation_task_2_fetch)%
condlist_0 = {!task_giver_alive(simulation_task_2)} fail

[simulation_task_3]
icon = ui_inGame2_PD_Opitniy_stalker
prior = 50
sim_communities = stalker
storyline = false
title = simulation_task_3_name
descr = simulation_task_3_text
job_descr = simulation_task_3_about
task_complete_descr = simulation_task_3_finish
stage_complete = 1
status_functor = hostage_task
status_functor_params = hostage_companion_task_1
target_functor = simulation_task_target
on_init = %=find_smart_under_faction_control_ex(simulation_task_3_id:bandit) =setup_companion_task(hostage_companion_task_1_stalker:nil:simulation_task_3_id:true) +hostage_companion_task_1_started%
precondition = {=random_chance =is_faction_enemy_to_actor(bandit) -hostage_companion_task_1_started -hostage_companion_task_1_hostage_rescued =all_avail_smart_stayed_squad_count_ge_by_faction_ex(1:nil:false:bandit) !squad_exist(hostage_companion_task_1)} true, false
repeat_timeout = 86400
on_complete = %=complete_task_inc_goodwill(50:stalker) =remove_special_task_squad(hostage_companion_task_1) =pstor_reset(simulation_task_3_id) =pstor_reset(simulation_task_3_target_id) -hostage_companion_task_1_hostage_rescued -hostage_companion_task_1_started =inc_task_stage(simulation_task_3) =unlock_smart(simulation_task_3_id)%
on_fail = %=unlock_smart(simulation_task_3_id) =fail_task_dec_goodwill(25:stalker) =pstor_reset(simulation_task_3_id) =pstor_reset(simulation_task_3_target_id) -hostage_companion_task_1_hostage_rescued -hostage_companion_task_1_started%
condlist_0 = {!squad_exist(hostage_companion_task_1)} fail
reward_money = 5000

[simulation_task_4]
icon = ui_inGame2_PD_Opitniy_stalker
prior = 50
sim_communities = dolg
storyline = false
title = simulation_task_4_name
descr = simulation_task_4_text
job_descr = simulation_task_4_about
task_complete_descr = simulation_task_4_finish
stage_complete = 1
status_functor = hostage_task
status_functor_params = hostage_companion_task_1
target_functor = simulation_task_target
on_init = %=find_smart_under_faction_control(simulation_task_4_id:freedom:bandit) =setup_companion_task(hostage_companion_task_1_dolg:nil:simulation_task_4_id:true) +hostage_companion_task_1_started%
precondition = {=random_chance =is_faction_enemy_to_actor(bandit) =is_faction_enemy_to_actor(freedom) -hostage_companion_task_1_started -hostage_companion_task_1_hostage_rescued =all_avail_smart_stayed_squad_count_ge_by_faction(1:nil:false:freedom:bandit) !squad_exist(hostage_companion_task_1)} true, false
repeat_timeout = 86400
on_complete = %=unlock_smart(simulation_task_4_id) =complete_task_inc_goodwill(50:dolg) =remove_special_task_squad(hostage_companion_task_1) =pstor_reset(simulation_task_4_id) =pstor_reset(simulation_task_4_target_id) -hostage_companion_task_1_hostage_rescued -hostage_companion_task_1_started =inc_task_stage(simulation_task_4)%
on_fail = %=unlock_smart(simulation_task_4_id) =fail_task_dec_goodwill(25:dolg) =pstor_reset(simulation_task_4_id) =pstor_reset(simulation_task_4_target_id) -hostage_companion_task_1_hostage_rescued -hostage_companion_task_1_started%
condlist_0 = {!squad_exist(hostage_companion_task_1)} fail
reward_money = 5000

[simulation_task_5]
icon = ui_inGame2_PD_Opitniy_stalker
prior = 50
sim_communities = freedom
storyline = false
title = simulation_task_5_name
descr = simulation_task_5_text
job_descr = simulation_task_5_about
task_complete_descr = simulation_task_5_finish
stage_complete = 1
status_functor = hostage_task
status_functor_params = hostage_companion_task_1
target_functor = simulation_task_target
on_init = %=find_smart_under_faction_control(simulation_task_4_id:dolg:bandit) =setup_companion_task(hostage_companion_task_1_freedom:nil:simulation_task_4_id:true) +hostage_companion_task_1_started%
precondition = {=random_chance =is_faction_enemy_to_actor(bandit) =is_faction_enemy_to_actor(dolg) -hostage_companion_task_1_started -hostage_companion_task_1_hostage_rescued =all_avail_smart_stayed_squad_count_ge_by_faction(1:nil:false:dolg:bandit) !squad_exist(hostage_companion_task_1)} true, false
repeat_timeout = 86400
on_complete = %=unlock_smart(simulation_task_5_id) =complete_task_inc_goodwill(50:freedom) =remove_special_task_squad(hostage_companion_task_1) =pstor_reset(simulation_task_4_id) =pstor_reset(simulation_task_4_target_id) -hostage_companion_task_1_hostage_rescued -hostage_companion_task_1_started =inc_task_stage(simulation_task_5)%
on_fail = %=unlock_smart(simulation_task_5_id) =fail_task_dec_goodwill(25:freedom) =pstor_reset(simulation_task_4_id) =pstor_reset(simulation_task_4_target_id) -hostage_companion_task_1_hostage_rescued -hostage_companion_task_1_started%
condlist_0 = {!squad_exist(hostage_companion_task_1)} fail
reward_money = 5000
